(window["webpackJsonpclient-2"]=window["webpackJsonpclient-2"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(32),l=a.n(o),c=(a(62),a(63),a(21)),i=a(22),s=a(24),m=a(23),u=a(25),v=a(29),d=a(10),h="SET_MOVIES",p="SET_FILTER",g="SET_SORT_COLUMN",E="SET_LOGGEDIN_USER";var f=Object(v.b)({visibilityFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.value;default:return e}},sortColumn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Title",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.value;default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.value;default:return e}},loggedInUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.value;default:return e}}}),b=a(11),y=a.n(b),N=a(6),w=a(26),k=a(3),C=a.n(k),I=a(18),S=a.n(I),O=a(55),j=a.n(O),D=a(35),B=a.n(D),L=a(1),F=a.n(L);a(85);var U=Object(d.b)(function(e){return{visibilityFilter:e.visibilityFilter,sortColumn:e.sortColumn}},{setFilter:function(e){return{type:p,value:e}},setSortColumn:function(e){return{type:g,value:e}}})(function(e){return r.a.createElement(F.a,null,r.a.createElement(F.a.Control,{className:"visibilityFilterForm",onChange:function(t){return e.setFilter(t.target.value)},value:e.visibilityFilter,placeholder:"filter movies"}),r.a.createElement(F.a.Control,{as:"select",className:"selectFilter",onChange:function(t){return e.setSortColumn(t.target.value)},value:e.sortColumn},r.a.createElement("option",null,"Title"),r.a.createElement("option",null,"Genre"),r.a.createElement("option",null,"Director")))}),G=a(30),M=a.n(G),x=(a(95),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.movie;return r.a.createElement(M.a,{style:{width:"16rem"}},r.a.createElement(M.a.Img,{variant:"top",src:e.ImagePath}),r.a.createElement(M.a.Body,null,r.a.createElement(M.a.Title,null,e.Title),r.a.createElement(M.a.Text,null,e.Description),r.a.createElement(N.b,{to:"/movies/".concat(e._id)},r.a.createElement(C.a,{variant:"primary",className:"btn btn-dark"},"More"))))}}]),t}(r.a.Component));var A=Object(d.b)(function(e){var t=e.movies,a=e.visibilityFilter,n=e.sortColumn,r=t.concat().sort(function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0});return""!==a&&"Title"===n&&(r=r.filter(function(e){return e.Title.toLowerCase().includes(a.toLowerCase())})),""!==a&&"Genre"===n&&(r=r.filter(function(e){return e.Genre.Name.toLowerCase().includes(a.toLowerCase())})),""!==a&&"Director"===n&&(r=r.filter(function(e){return e.Director.Name.toLowerCase().includes(a.toLowerCase())})),{movies:r}})(function(e){var t=e.movies;return t?r.a.createElement("div",{className:"movie-list"},r.a.createElement(U,null),r.a.createElement(S.a,null,r.a.createElement(j.a,null,t.map(function(e){return r.a.createElement(B.a,{key:e._id,xs:12,sm:6,md:4},r.a.createElement(x,{key:e._id,movie:e}))})))):r.a.createElement("div",{className:"main-view"})}),T=a(27);a(102);function P(e){var t=Object(n.useState)(""),a=Object(T.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(T.a)(c,2),s=i[0],m=i[1];return r.a.createElement(S.a,{className:"login-view"},r.a.createElement("h1",null,"Welcome to MyFlix! "),r.a.createElement(F.a,null,r.a.createElement(F.a.Group,{controlId:"formBasicEmail"},r.a.createElement(F.a.Label,null,"Username"),r.a.createElement(F.a.Control,{type:"text",value:o,onChange:function(e){return l(e.target.value)},placeholder:"Enter Username"})),r.a.createElement(F.a.Group,{controlId:"formBasicPassword"},r.a.createElement(F.a.Label,null,"Password"),r.a.createElement(F.a.Control,{type:"password",value:s,onChange:function(e){return m(e.target.value)},placeholder:"Enter Password"})),r.a.createElement(C.a,{variant:"primary",type:"button",className:"btn btn-dark",onClick:function(t){t.preventDefault(),y.a.post("https://myflixapp.herokuapp.com/login",{Username:o,Password:s}).then(function(t){var a=t.data;e.onLoggedIn(a)}).catch(function(e){alert("no such user")})}},"LOGIN"),r.a.createElement("p",null,"Not a member, Signup",r.a.createElement(N.b,{to:"/register"},r.a.createElement("span",null," here")))))}a(103);function _(e){var t=Object(n.useState)(""),a=Object(T.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(T.a)(c,2),s=i[0],m=i[1],u=Object(n.useState)(""),v=Object(T.a)(u,2),d=v[0],h=v[1],p=Object(n.useState)(""),g=Object(T.a)(p,2),E=g[0],f=g[1];return r.a.createElement(S.a,{className:"registration-view"},r.a.createElement("h1",null,"Register"),r.a.createElement(F.a,null,r.a.createElement(F.a.Group,{controlId:"formNewUsername"},r.a.createElement(F.a.Label,null,"Username"),r.a.createElement(F.a.Control,{size:"sm",type:"text",placeholder:"Enter username",value:o,onChange:function(e){return l(e.target.value)}})),r.a.createElement(F.a.Group,{controlId:"formNewPassword"},r.a.createElement(F.a.Label,null,"Password"),r.a.createElement(F.a.Control,{size:"sm",type:"password",placeholder:"Enter password",value:s,onChange:function(e){return m(e.target.value)}})),r.a.createElement(F.a.Group,{controlId:"formNewEmail"},r.a.createElement(F.a.Label,null,"Email"),r.a.createElement(F.a.Control,{size:"sm",type:"email",placeholder:"example@gmail.com",value:d,onChange:function(e){return h(e.target.value)}})),r.a.createElement(F.a.Group,{controlId:"formNewBirthday"},r.a.createElement(F.a.Label,null,"Birthday"),r.a.createElement(F.a.Control,{size:"sm",type:"date",placeholder:"MM/DD/YYYY",value:E,onChange:function(e){return f(e.target.value)}})),r.a.createElement(C.a,{variant:"dark",onClick:function(e){e.preventDefault(),y.a.post("https://myflixapp.herokuapp.com/users",{Username:o,Password:s,Email:d,Birthday:E}).then(function(e){var t=e.data;console.log(t),window.open("/","_self")}).catch(function(e){console.log("error registering the user")})}},"Register"),r.a.createElement("p",null,"Already a member?",r.a.createElement(N.b,{to:"/"},r.a.createElement("span",null,"Login")))))}a(52);var Y=Object(d.b)(function(e){return{movies:e.movies}})(function(e){var t=e.movies,a=e.movieId;if(!t||!t.length)return null;var n=t.find(function(e){return e._id===a});return r.a.createElement("div",{className:"movie-view"},r.a.createElement("div",{className:"movie-title"},r.a.createElement("h1",null,n.Title)),r.a.createElement("img",{className:"movie-poster",src:n.ImagePath,alt:"movie cover"}),r.a.createElement("div",{className:"movie-description"},r.a.createElement("h4",{className:"label"},"Description"),r.a.createElement("div",{className:"value"},n.Description)),r.a.createElement("div",{className:"movie-genre"},r.a.createElement("h4",{className:"label"},"Genre"),r.a.createElement("div",{className:"value"},n.Genre.Name)),r.a.createElement("div",{className:"movie-director"},r.a.createElement("h4",{className:"label"},"Director"),r.a.createElement("div",{className:"value"},n.Director.Name)),r.a.createElement(N.b,{to:"/"},r.a.createElement(C.a,{className:"view-btn",variant:"dark",type:"button"},"Go Back")),r.a.createElement(N.b,{to:"/genres/".concat(n.Genre.Name)},r.a.createElement(C.a,{className:"view-btn",variant:"dark",type:"button"},"Genre")),r.a.createElement(N.b,{to:"/directors/".concat(n.Director.Name)},r.a.createElement(C.a,{className:"view-btn",variant:"dark",type:"button"},"Director")),r.a.createElement(C.a,{className:"view-btn",variant:"success",type:"button",onClick:function(e){return function(e){e.preventDefault(),y.a.put("https://myflixapp.herokuapp.com/users/".concat(localStorage.getItem("user"),"/movies/").concat(n._id),{Username:localStorage.getItem("user")},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){console.log(e),alert("Movie has been added to your Favorite List!")}).catch(function(e){console.log("Error adding movie to list"),alert("Something went wrong!")})}(e)}},"Add to favorites"))});a(104);var z=Object(d.b)(function(e){return{movies:e.movies}})(function(e){var t=e.movies,a=e.directorName;if(!t||!t.length)return null;var n=t.find(function(e){return e.Director.Name===a}).Director;return r.a.createElement("div",{className:"director-view"},r.a.createElement("h1",{className:"director"},n.Name),r.a.createElement("h2",null,"Biography"),r.a.createElement("div",{className:"bio"},n.Bio),r.a.createElement("h2",null,"Born"),r.a.createElement("div",{className:"birth"},n.Birth),r.a.createElement("h2",null,"Died"),r.a.createElement("div",{className:"death"},n.Death),r.a.createElement(N.b,{to:"/"},r.a.createElement(C.a,{variant:"dark",type:"button"},"BACK")))});a(105);var R=Object(d.b)(function(e){return{movies:e.movies}})(function(e){var t=e.movies,a=e.genreName;if(!t||!t.length)return null;var n=t.find(function(e){return e.Genre.Name===a}).Genre;return r.a.createElement("div",{className:"genre-view"},r.a.createElement("h1",{className:"genre"},n.Name),r.a.createElement("div",{className:"description"},n.Description),r.a.createElement(N.b,{to:"/"},r.a.createElement(C.a,{variant:"dark",type:"button"},"BACK")))}),H=a(56),J=(a(106),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={username:null,password:null,email:null,birthday:null,favoriteMovies:[],usernameForm:null,passwordForm:null,emailForm:null,birthdayForm:null},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!==e&&this.getUser(e)}},{key:"getUser",value:function(e){var t=this,a=localStorage.getItem("user");y.a.get("https://myflixapp.herokuapp.com/users/".concat(a),{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){t.setState({userData:e.data,username:e.data.Username,password:e.data.Password,email:e.data.Email,birthday:e.data.Birthday,favoriteMovies:e.data.FavoriteMovies})}).catch(function(e){console.log(e)})}},{key:"deleteUser",value:function(e){e.preventDefault(),y.a.delete("https://myflixapp.herokuapp.com/users/".concat(localStorage.getItem("user")),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){alert("Your Account has been deleted!"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.open("/","_self")}).catch(function(e){alert("failed to delete user")})}},{key:"deleteMovie",value:function(e,t){e.preventDefault(),console.log(t),y.a.delete("https://myflixapp.herokuapp.com/users/".concat(localStorage.getItem("user"),"/movies/").concat(t),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){alert("Movie has been removed from list!")}).catch(function(e){alert("Something went wrong...")})}},{key:"handleChange",value:function(e){this.setState(Object(H.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(this.state.username),y.a.put("https://myflixapp.herokuapp.com/users/".concat(localStorage.getItem("user")),{Username:this.state.usernameForm,Password:this.state.passwordForm,Email:this.state.emailForm,Birthday:this.state.birthdayForm},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){console.log(e),alert("Your data has been updated!"),localStorage.setItem("user",t.state.username)}).catch(function(e){console.log("Error updating the userdata"),alert("Something went wrong!")})}},{key:"toggleForm",value:function(){var e=document.getElementsByClassName("changeDataForm")[0],t=document.getElementById("toggleButton");e.classList.toggle("show-form"),e.classList.contains("show-form")?t.innerHTML="CHANGE DATA &uarr;":t.innerHTML="CHANGE DATA &darr;"}},{key:"render",value:function(){var e=this,t=this.state,a=t.userData,n=t.username,o=t.email,l=t.birthday,c=t.favoriteMovies;return a?r.a.createElement("div",{className:"profile-view"},r.a.createElement("h1",null,"Your Profile Data"),r.a.createElement("div",{className:"username"},r.a.createElement("div",{className:"label"},"Name:"),r.a.createElement("div",{className:"value"},n)),r.a.createElement("div",{className:"password"},r.a.createElement("div",{className:"label"},"Password:"),r.a.createElement("div",{className:"value"},"***********")),r.a.createElement("div",{className:"birthday"},r.a.createElement("div",{className:"label"},"Birthday:"),r.a.createElement("div",{className:"value"},l.substr(-24,10))),r.a.createElement("div",{className:"email"},r.a.createElement("div",{className:"label"},"Email:"),r.a.createElement("div",{className:"value"},o)),r.a.createElement("div",{className:"favoriteMovies"},r.a.createElement("div",{className:"label"},"Favorite Movies:"),0===c.length&&r.a.createElement("div",{className:"value"},"Your Favorite Movie List is empty."),c.length>0&&r.a.createElement("div",{className:"value favorite-movies"},c.map(function(t){return r.a.createElement("div",{className:"movie-image",key:t},r.a.createElement("img",{className:"movie-poster",src:JSON.parse(localStorage.getItem("movies")).find(function(e){return e._id===t}).ImagePath,alt:"Movie Cover"}),r.a.createElement("span",{onClick:function(a){return e.deleteMovie(a,t)}}," Delete"))}))),r.a.createElement(N.b,{to:"/"},r.a.createElement(C.a,{className:"view-btn",variant:"dark",type:"button"},"Go Back")),r.a.createElement(C.a,{className:"view-btn",variant:"dark",type:"button",onClick:function(t){return e.deleteUser(t)}},"Deregister Account"),r.a.createElement(C.a,{id:"toggleButton",variant:"dark",type:"button",onClick:function(){return e.toggleForm()}},"CHANGE DATA \u2193"),r.a.createElement(F.a,{className:"changeDataForm"},r.a.createElement("h2",null,"Change Data"),r.a.createElement(F.a.Group,{controlId:"formBasicUsername"},r.a.createElement(F.a.Label,null,"Your Username"),r.a.createElement(F.a.Control,{type:"text",name:"usernameForm",onChange:function(t){return e.handleChange(t)},placeholder:"Enter Username"}),r.a.createElement(F.a.Text,{className:"text-muted"},"Type your username here.")),r.a.createElement(F.a.Group,{controlId:"formBasicPassword"},r.a.createElement(F.a.Label,null,"Your Password"),r.a.createElement(F.a.Control,{type:"password",name:"passwordForm",onChange:function(t){return e.handleChange(t)},placeholder:"Enter Password"})),r.a.createElement(F.a.Group,{controlId:"formBasicEmail"},r.a.createElement(F.a.Label,null,"Your Email"),r.a.createElement(F.a.Control,{type:"email",name:"emailForm",onChange:function(t){return e.handleChange(t)},placeholder:"example@ema.il"})),r.a.createElement(F.a.Group,{controlId:"formBasicBirthday"},r.a.createElement(F.a.Label,null,"Your Birthday"),r.a.createElement(F.a.Control,{type:"date",placeholder:"01.01.2000",name:"birthdayForm",onChange:function(t){return e.handleChange(t)}})),r.a.createElement(C.a,{variant:"dark",type:"button",onClick:function(t){return e.handleSubmit(t)}},"CHANGE!"))):null}}]),t}(r.a.Component)),W=(a(107),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).state={user:null},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!==e&&(this.setState({user:localStorage.getItem("user")}),this.getMovies(e),this.getUser(e))}},{key:"getMovies",value:function(e){var t=this;y.a.get("https://myflixapp.herokuapp.com/movies",{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){t.props.setMovies(e.data),localStorage.setItem("movies",JSON.stringify(e.data))}).catch(function(e){console.log(e)})}},{key:"getUser",value:function(e){var t=this,a=localStorage.getItem("user");y.a.get("https://myflixapp.herokuapp.com/users/".concat(a),{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){t.props.setLoggedInUser(e.data)}).catch(function(e){console.log(e)})}},{key:"onLoggedIn",value:function(e){console.log(e.user),this.setState({user:e.user.Username}),this.props.setLoggedInUser(e.user),localStorage.setItem("token",e.token),localStorage.setItem("user",e.user.Username),this.getMovies(e.token)}},{key:"UserRegistered",value:function(e){this.setState({user:e})}},{key:"logOut",value:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("movies"),this.setState({user:null}),window.open("/","_self")}},{key:"render",value:function(){var e=this,t=this.state.user;return r.a.createElement(N.a,null,r.a.createElement(S.a,{className:"main-view"},r.a.createElement(C.a,{type:"button",className:"btn btn-light btn-sm",onClick:function(){return e.logOut()}},"Log out"),r.a.createElement(N.b,{to:"/profile"},r.a.createElement(C.a,{type:"button",className:"btn btn-light btn-sm"},"My Profile")),r.a.createElement(w.a,{exact:!0,path:"/",render:function(){return t?r.a.createElement(A,null):r.a.createElement(P,{onLoggedIn:function(t){return e.onLoggedIn(t)}})}}),r.a.createElement(w.a,{exact:!0,path:"/movies/:id",render:function(e){var t=e.match;return r.a.createElement(Y,{movieId:t.params.id})}}),r.a.createElement(w.a,{exact:!0,path:"/genres/:name",render:function(e){var t=e.match;return r.a.createElement(R,{genreName:t.params.name})}}),r.a.createElement(w.a,{exact:!0,path:"/directors/:name",render:function(e){var t=e.match;return r.a.createElement(z,{directorName:t.params.name})}}),r.a.createElement(w.a,{exact:!0,path:"/register",render:function(){return r.a.createElement(_,{UserRegistered:function(t){return e.UserRegistered(t)}})}}),r.a.createElement(w.a,{exact:!0,path:"/profile",render:function(){return r.a.createElement(J,null)}})))}}]),t}(r.a.Component)),K=Object(d.b)(null,{setMovies:function(e){return{type:h,value:e}},setLoggedInUser:function(e){return{type:E,value:e}}})(W),V=(a(108),Object(v.c)(f)),$=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{store:V},r.a.createElement(K,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e,t,a){},57:function(e,t,a){e.exports=a(109)},63:function(e,t,a){},85:function(e,t,a){},95:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.24b4c7da.chunk.js.map